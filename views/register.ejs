<!doctype html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" href="favicon.ico" type="image/x-icon" />

    <title><%= title %></title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>



    <!-- Bootstrap Core and vandor -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css" />

    <!-- Core css -->
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/theme1.css" />


</head>

<body class="font-montserrat">

    <div class="auth">
        <div class="auth_left">
            <div class="card">
                <div class="text-center mb-5">
                    <a class="header-brand" href="/" class="nav-link user_btn"><img class="avatar"
                            src="assets/images/xs/loogo.png"><i></i></a>
                </div>
                <div class="card-body">
                    <%if(isvalid){%>
                        <div class="alert alert-danger alert-dismissible">
                    
                            <a href="#" class="close" data-dismiss="alert" aria-label="close" onclick="this.parentElement.style.display='none'"></a>
                            <strong><%= message %></strong>
                        </div>
                        <%}%>
                    <form id="bibi" action="/register" method="post">
                            
                        <div class="card-title">Create new account</div>
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" placeholder="Enter name" name="displayName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email address</label>
                            <input type="email" class="form-control" placeholder="Enter email" name="email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" placeholder="Password" name="password">
                        </div>
                        <div class="form-group">
                            <label class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" name="check" />
                                <span class="custom-control-label">Agree the <a href="#">terms and policy</a></span>
                            </label>
                        </div>
                        <div class="form-footer">
                            <button type="submit" class="btn btn-primary btn-block">Create new account></button>
                        </div>
                    </form>
                </div>
                <div class="text-center text-muted">
                    Already have account? <a href="/login">Sign in</a>
                </div>
            </div>
        </div>
        <div class="auth_right full_img"></div>
    </div>

  
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script> -->


    <!-- Add Firebase products that you want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script> -->
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script> -->

    <!-- <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyC2daJ4Hpsvt5T4SgZksYbRNVIvRRMClAs",
            authDomain: "management-project-24f41.firebaseapp.com",
            projectId: "management-project-24f41",
            storageBucket: "management-project-24f41.appspot.com",
            messagingSenderId: "404483039190",
            appId: "1:404483039190:web:0ce9e5b66291e322e50e77",
            measurementId: "G-YV1250DXB4"
        };
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        const db = firebase.firestore(app);

        let form = document.querySelector('#bibi');

        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                // User is signed in.
                console.log(user)
                window.location.replace("/projecttodolist/login.html");
            } else {
                // No user is signed in.
                console.log('No user is signed in.')
            }
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            firebase.auth().createUserWithEmailAndPassword(form.email.value, form.password.value)
                .then((userCredential) => {
                    // Signed in 
                    var user = userCredential.user;

                    console.log(user);

                    db.collection('information').add({
                        name: form.name.value,
                        email: form.email.value,
                        password: form.password.value
                    }).then(function () {
                        console.log("Document successfully written!");
                        window.location.replace("/projecttodolist/login.html");
                    }).catch(function (error) {
                        console.error("Error writing document: ", error);
                    });
                    // setTimeout(func, 500);
                    // ...
                })
                .catch((error) => {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    // ..

                    console.log('1', error)
                });
        });


    </script> -->

    <!-- <script src="infor.js"></script> -->

    <script src="assets/bundles/lib.vendor.bundle.js"></script>
    <script src="assets/js/core.js"></script>
</body>

</html>